# ë³´í—˜ ë¬¸ì„œ íŒŒì‹± ì‹œìŠ¤í…œ - ìƒì„¸ ì‘ë™ í”„ë¡œì„¸ìŠ¤

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì „ì²´ ì•„í‚¤í…ì²˜](#ì „ì²´-ì•„í‚¤í…ì²˜)
3. [ë°ì´í„° íë¦„](#ë°ì´í„°-íë¦„)
4. [Phaseë³„ ìƒì„¸ í”„ë¡œì„¸ìŠ¤](#phaseë³„-ìƒì„¸-í”„ë¡œì„¸ìŠ¤)
5. [í•µì‹¬ ì»´í¬ë„ŒíŠ¸](#í•µì‹¬-ì»´í¬ë„ŒíŠ¸)
6. [API í˜¸ì¶œ íë¦„](#api-í˜¸ì¶œ-íë¦„)
7. [ì˜ˆì™¸ ì²˜ë¦¬](#ì˜ˆì™¸-ì²˜ë¦¬)

---

## ğŸ¯ ì‹œìŠ¤í…œ ê°œìš”

### ì‹œìŠ¤í…œ ëª©ì 
ë³´í—˜ ìƒí’ˆ PDF ë¬¸ì„œì—ì„œ ë³´í—˜ê¸°ê°„, ë‚©ì…ê¸°ê°„, ê°€ì…ë‚˜ì´ ë“±ì˜ ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ ë³´í—˜ë£Œë¥¼ ê³„ì‚°í•˜ê³ , ë°ì´í„° ì •í™•ì„±ì„ ê²€ì¦í•˜ëŠ” ì‹œìŠ¤í…œ

### í•µì‹¬ ê¸°ëŠ¥
1. **PDF íŒŒì‹±**: ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ PDFì—ì„œ ì •ë³´ ì¶”ì¶œ
2. **ì¡°í•© ìƒì„±**: ë³´í—˜ê¸°ê°„ Ã— ë‚©ì…ê¸°ê°„ ì¡°í•© ìƒì„±
3. **ë³´í—˜ë£Œ ê³„ì‚°**: DB ì¡°íšŒ ë° ê³„ì‚°
4. **ë°ì´í„° ê²€ì¦**: ì¤€ë¹„ê¸ˆ í…Œì´ë¸” ë§¤ì¹­ í™•ì¸
5. **í•™ìŠµ ë° ê°œì„ **: ì‚¬ìš©ì í”¼ë“œë°±ìœ¼ë¡œ ì •í™•ë„ í–¥ìƒ

### ì£¼ìš” íŠ¹ì§•
- âœ… **ì™„ì „ ì˜¤í”„ë¼ì¸**: ë‚´ë¶€ë§ í™˜ê²½ ì§€ì›
- âœ… **í•˜ì´ë¸Œë¦¬ë“œ íŒŒì‹±**: ë‹¤ì¤‘ ì „ëµ í†µí•©
- âœ… **ìê¸° ê°œì„ **: ì ì§„ì  í•™ìŠµ ì‹œìŠ¤í…œ
- âœ… **ë†’ì€ ì •í™•ë„**: 95%+ ëª©í‘œ

---

## ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (React + Electron)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ PDF List â”‚  â”‚ ìƒí’ˆì„ íƒ â”‚  â”‚ ë‚˜ì´ì…ë ¥ â”‚  â”‚ ë³´í—˜ë£Œ   â”‚   â”‚
â”‚  â”‚  Panel   â”‚  â”‚  Panel   â”‚  â”‚  Panel   â”‚  â”‚  Grid    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚              â”‚              â”‚              â”‚       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                            â”‚                                 â”‚
â”‚                      Zustand Store                           â”‚
â”‚                      (useAppStore)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                   HTTP REST API (axios)
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Backend (Spring Boot)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Controller Layer                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚  Product   â”‚  â”‚  Premium   â”‚  â”‚  Learning  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Controller â”‚  â”‚ Controller â”‚  â”‚ Controller â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Service Layer                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚      ProductService (Main)                  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  - getProductInfo()                         â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  - calculatePremium()                       â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  - parseTermsWithPython() â†’ Hybrid          â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                      â”‚                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚    HybridParsingService (Phase 1)            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - ë‹¤ì¤‘ ì „ëµ ìˆœì°¨ ì‹œë„                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - ì‹ ë¢°ë„ í‰ê°€ ë° ìºì‹±                        â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚         â”‚           â”‚           â”‚                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚  â”‚  â”‚ Python   â”‚ â”‚Business  â”‚ â”‚ FewShot  â”‚             â”‚  â”‚
â”‚  â”‚  â”‚   OCR    â”‚ â”‚ Method   â”‚ â”‚   LLM    â”‚             â”‚  â”‚
â”‚  â”‚  â”‚ Strategy â”‚ â”‚ Strategy â”‚ â”‚ Strategy â”‚             â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚  â”‚                      â”‚                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  MultiLayerValidationService (Phase 2)       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - Layer 1: êµ¬ë¬¸ ê²€ì¦                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - Layer 2: ì˜ë¯¸ ê²€ì¦                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - Layer 3: ë„ë©”ì¸ ê²€ì¦                       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - Layer 4: LLM êµì°¨ ê²€ì¦                     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                      â”‚                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  IncrementalLearningService (Phase 3)        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - íŒ¨í„´ ìë™ í•™ìŠµ                             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - Few-Shot ì˜ˆì‹œ ìƒì„±                         â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Data Access Layer                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚  â”‚   MyBatis  â”‚  â”‚   Oracle   â”‚                      â”‚  â”‚
â”‚  â”‚  â”‚   Mapper   â”‚  â”‚     DB     â”‚                      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  External Services                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚    Python    â”‚  â”‚    Ollama    â”‚  â”‚   PDFBox     â”‚     â”‚
â”‚  â”‚  PDF Parser  â”‚  â”‚  LLM Service â”‚  â”‚   Library    â”‚     â”‚
â”‚  â”‚  (OCR)       â”‚  â”‚  (Local)     â”‚  â”‚              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ë°ì´í„° íë¦„

### 1ï¸âƒ£ ì‚¬ìš©ìê°€ ìƒí’ˆ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” ê²½ìš°

```
[Frontend]
ì‚¬ìš©ìê°€ UW21239 PDF ì„ íƒ â†’ ìƒí’ˆì½”ë“œ 21686 í´ë¦­
         â”‚
         â†“
[Zustand Store]
selectMainCode("21686") í˜¸ì¶œ
         â”‚
         â†“
[API Call]
GET /api/product/info/21686
         â”‚
         â†“
[ProductController]
getProductInfo(insuCd: "21686")
         â”‚
         â†“
[ProductService]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. PDF íŒŒì¼ ì°¾ê¸°                     â”‚
â”‚    - pdfDirì—ì„œ UW21239.pdf ê²€ìƒ‰    â”‚
â”‚    - insuCdê°€ í¬í•¨ëœ PDF ë§¤ì¹­       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ                   â”‚
â”‚    - PdfParser.readAllText()        â”‚
â”‚    - ì „ì²´ í…ìŠ¤íŠ¸ë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë“œ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ìƒí’ˆëª… ì¶”ì¶œ                       â”‚
â”‚    - parseCodeTable()               â”‚
â”‚    - fuzzyFindNameByCode()          â”‚
â”‚    â†’ "(ë¬´)í¥êµ­ìƒëª… ë‹¤ì‚¬ë‘ì•”ë³´í—˜"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. í•˜ì´ë¸Œë¦¬ë“œ íŒŒì‹± (í•µì‹¬!)          â”‚
â”‚    parseTermsWithPython(pdf, insuCd)â”‚
â”‚    â†“                                 â”‚
â”‚    HybridParsingService í˜¸ì¶œ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
[HybridParsingService]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ìºì‹œ í™•ì¸                    â”‚
â”‚    - ì´ì „ì— íŒŒì‹±í•œ ì  ìˆëŠ”ì§€ í™•ì¸   â”‚
â”‚    - ìˆìœ¼ë©´ ì¦‰ì‹œ ë°˜í™˜ (0.5ì´ˆ)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (ìºì‹œ ë¯¸ìŠ¤)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: ì „ëµ 1 - Python OCR         â”‚
â”‚    - pythonPdfService í˜¸ì¶œ          â”‚
â”‚    - parse_pdf_improved.py ì‹¤í–‰     â”‚
â”‚    - ì‹ ë¢°ë„ í‰ê°€: 75ì                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (85ì  ë¯¸ë§Œ)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: ì „ëµ 2 - ì‚¬ì—…ë°©ë²•ì„œ         â”‚
â”‚    - PDF í…ìŠ¤íŠ¸ì—ì„œ ì •ê·œì‹ ì¶”ì¶œ     â”‚
â”‚    - ì‹ ë¢°ë„ í‰ê°€: 80ì                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (85ì  ë¯¸ë§Œ)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: ì „ëµ 3 - Few-Shot LLM       â”‚
â”‚    - Few-Shot í”„ë¡¬í”„íŠ¸ ìƒì„±         â”‚
â”‚    - 3ê°œ LLM ë³‘ë ¬ ì‹¤í–‰              â”‚
â”‚      * Llama 3.1                     â”‚
â”‚      * Mistral                       â”‚
â”‚      * CodeLlama                     â”‚
â”‚    - ê²°ê³¼ íˆ¬í‘œ í†µí•©                  â”‚
â”‚    - ë‹¤ì¸µ ê²€ì¦ (4ë‹¨ê³„)              â”‚
â”‚    - ì‹ ë¢°ë„ í‰ê°€: 92ì                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (85ì  ì´ìƒ! âœ“)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: ê²°ê³¼ ë°˜í™˜ ë° ìºì‹±           â”‚
â”‚    {                                 â”‚
â”‚      insuTerm: "ì¢…ì‹ ",               â”‚
â”‚      payTerm: "10ë…„ë‚©, 15ë…„ë‚©, ...",â”‚
â”‚      ageRange: "10ë…„ë‚©(ë‚¨:15~80)",  â”‚
â”‚      renew: "ë¹„ê°±ì‹ í˜•"               â”‚
â”‚    }                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
[ProductService]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ì¡°í•© ìƒì„±                         â”‚
â”‚    generateTermCombinations()        â”‚
â”‚    - insuTerm: "ì¢…ì‹ " (1ê°œ)         â”‚
â”‚    - payTerm: "10ë…„ë‚©,15ë…„ë‚©,..." (4ê°œ)â”‚
â”‚    â†’ 1 Ã— 4 = 4ê°œ ì¡°í•© ìƒì„±          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. ì‘ë‹µ ìƒì„±                         â”‚
â”‚    ProductInfoResponse {             â”‚
â”‚      insuCd: "21686",                â”‚
â”‚      name: "(ë¬´)í¥êµ­ìƒëª…...",        â”‚
â”‚      type: "ì£¼ê³„ì•½",                 â”‚
â”‚      terms: [                        â”‚
â”‚        {insuTerm: "ì¢…ì‹ ",            â”‚
â”‚         payTerm: "10ë…„ë‚©",           â”‚
â”‚         ageRange: "ë‚¨:15~80,..."},   â”‚
â”‚        {insuTerm: "ì¢…ì‹ ",            â”‚
â”‚         payTerm: "15ë…„ë‚©",...},      â”‚
â”‚        ... (4ê°œ)                     â”‚
â”‚      ],                              â”‚
â”‚      calcAvailable: true             â”‚
â”‚    }                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
[Frontend]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. UI ë Œë”ë§                         â”‚
â”‚    - 4ê°œ í–‰ ìƒì„± (ì¡°í•©ë³„)           â”‚
â”‚    - ê° í–‰ë§ˆë‹¤ "ë°ì´í„°" ë²„íŠ¼        â”‚
â”‚    - ë‚˜ì´ ì…ë ¥ ì‹œ ë³´í—˜ë£Œ ê³„ì‚°       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Phaseë³„ ìƒì„¸ í”„ë¡œì„¸ìŠ¤

### Phase 1: í•˜ì´ë¸Œë¦¬ë“œ íŒŒì‹± ì‹œìŠ¤í…œ

#### 1.1 ì „ëµ íŒ¨í„´ êµ¬ì¡°

```java
// ì¸í„°í˜ì´ìŠ¤
interface ParsingStrategy {
    Map<String, String> parse(File pdfFile, String insuCd);
    int evaluateConfidence(Map<String, String> result);
    int getPriority();
    boolean isAvailable();
}

// êµ¬í˜„ì²´ 1: Python OCR (ìš°ì„ ìˆœìœ„ 1)
class PythonOcrParsingStrategy implements ParsingStrategy {
    public Map<String, String> parse(File pdfFile, String insuCd) {
        // Python í”„ë¡œì„¸ìŠ¤ í˜¸ì¶œ
        Map<String, Object> result = pythonPdfService.extractProductInfo(...);
        // ê²°ê³¼ ë³€í™˜
        return convertToMap(result);
    }
    
    public int evaluateConfidence(Map<String, String> result) {
        // ê° í•„ë“œ ìœ íš¨ì„± ê²€ì‚¬ (ê° 25ì )
        int score = 0;
        if (isValid(result.get("insuTerm"))) score += 25;
        if (isValid(result.get("payTerm"))) score += 25;
        if (isValid(result.get("ageRange"))) score += 25;
        if (isValid(result.get("renew"))) score += 25;
        return score; // 0-100ì 
    }
}

// êµ¬í˜„ì²´ 2: ì‚¬ì—…ë°©ë²•ì„œ íŒŒì‹± (ìš°ì„ ìˆœìœ„ 2)
class BusinessMethodParsingStrategy implements ParsingStrategy {
    public Map<String, String> parse(File pdfFile, String insuCd) {
        // PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ
        String text = extractPdfText(pdfFile);
        
        // ì •ê·œì‹ íŒ¨í„´ ë§¤ì¹­
        String insuTerm = extractInsuranceTerm(text);
        String payTerm = extractPaymentTerm(text);
        String ageRange = extractAgeRange(text);
        
        return buildMap(insuTerm, payTerm, ageRange);
    }
}

// êµ¬í˜„ì²´ 3: Few-Shot LLM (ìš°ì„ ìˆœìœ„ 3)
class FewShotLlmParsingStrategy implements ParsingStrategy {
    public Map<String, String> parse(File pdfFile, String insuCd) {
        // Few-Shot í”„ë¡¬í”„íŠ¸ ìƒì„±
        String prompt = fewShotExamples.buildPrompt(...);
        
        // 3ê°œ LLM ë³‘ë ¬ ì‹¤í–‰
        CompletableFuture<Map<String, String>>[] futures = {
            ollama.parseWithLlama(prompt),
            ollama.parseWithMistral(prompt),
            ollama.parseWithCodeLlama(prompt)
        };
        
        // ê²°ê³¼ ëŒ€ê¸° (30ì´ˆ íƒ€ì„ì•„ì›ƒ)
        CompletableFuture.allOf(futures).get(30, SECONDS);
        
        // íˆ¬í‘œ ê¸°ë°˜ í†µí•©
        Map<String, String> integrated = integrateResults(...);
        
        // ë‹¤ì¸µ ê²€ì¦
        ValidationResult validation = validationService.validate(...);
        
        return integrated;
    }
}
```

#### 1.2 í•˜ì´ë¸Œë¦¬ë“œ ì„œë¹„ìŠ¤ ë™ì‘

```java
class HybridParsingService {
    public Map<String, String> parseWithMultipleStrategies(File pdf, String insuCd) {
        log.info("=== í•˜ì´ë¸Œë¦¬ë“œ íŒŒì‹± ì‹œì‘: {} ===", insuCd);
        
        // 1. ìºì‹œ í™•ì¸
        String cacheKey = pdf.getName() + "_" + insuCd;
        if (cache.containsKey(cacheKey)) {
            log.info("ìºì‹œ íˆíŠ¸!");
            return cache.get(cacheKey);
        }
        
        // 2. ìš°ì„ ìˆœìœ„ ìˆœìœ¼ë¡œ ì „ëµ ì‹œë„
        List<ParseResult> results = new ArrayList<>();
        
        for (ParsingStrategy strategy : strategies) { // ìš°ì„ ìˆœìœ„ ì •ë ¬ë¨
            if (!strategy.isAvailable()) continue;
            
            long start = System.currentTimeMillis();
            Map<String, String> result = strategy.parse(pdf, insuCd);
            long elapsed = System.currentTimeMillis() - start;
            
            int confidence = strategy.evaluateConfidence(result);
            
            log.info("[{}] ì™„ë£Œ - ì‹ ë¢°ë„: {}%, ì‹œê°„: {}ms", 
                    strategy.getName(), confidence, elapsed);
            
            results.add(new ParseResult(strategy.getName(), result, confidence, elapsed));
            
            // 3. ì‹ ë¢°ë„ 85% ì´ìƒì´ë©´ ì¦‰ì‹œ ë°˜í™˜
            if (confidence >= 85) {
                log.info("ë†’ì€ ì‹ ë¢°ë„ ë‹¬ì„±, ì¶”ê°€ ì „ëµ ìƒëµ");
                cache.put(cacheKey, result);
                return result;
            }
        }
        
        // 4. ìµœê³  ì‹ ë¢°ë„ ê²°ê³¼ ì„ íƒ
        ParseResult best = results.stream()
            .max(Comparator.comparingInt(ParseResult::getConfidence))
            .orElse(null);
        
        if (best != null) {
            log.info("ìµœì¢… ì„ íƒ: {} ({}%)", best.getStrategy(), best.getConfidence());
            cache.put(cacheKey, best.getResult());
            return best.getResult();
        }
        
        // 5. ëª¨ë“  ì „ëµ ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’
        return getDefaultResult();
    }
}
```

---

### Phase 2: Few-Shot ìµœì í™” + ë‹¤ì¸µ ê²€ì¦

#### 2.1 Few-Shot í”„ë¡¬í”„íŠ¸ ìƒì„±

```java
class FewShotExamples {
    private List<String> examples = new ArrayList<>();
    
    public FewShotExamples() {
        // ì´ˆê¸° 5ê°œ ì˜ˆì‹œ ë¡œë“œ
        examples.add("""
            [ì˜ˆì‹œ 1 - ì£¼ê³„ì•½: ì¢…ì‹ í˜•]
            ì…ë ¥:
            ìƒí’ˆì½”ë“œ: 21686
            ìƒí’ˆëª…: (ë¬´)í¥êµ­ìƒëª… ë‹¤(å¤š)ì‚¬ë‘ì•”ë³´í—˜
            ì‚¬ì—…ë°©ë²•:
            - ë³´í—˜ê¸°ê°„: ì¢…ì‹ 
            - ë‚©ì…ê¸°ê°„: 10ë…„ë‚©, 15ë…„ë‚©, 20ë…„ë‚©, 30ë…„ë‚©
            - ê°€ì…ë‚˜ì´: 10ë…„ë‚©(ë‚¨:ë§Œ15ì„¸~80ì„¸,ì—¬:ë§Œ15ì„¸~80ì„¸)
            
            ì¶œë ¥:
            {
              "insuTerm": "ì¢…ì‹ ",
              "payTerm": "10ë…„ë‚©, 15ë…„ë‚©, 20ë…„ë‚©, 30ë…„ë‚©",
              "ageRange": "10ë…„ë‚©(ë‚¨:15~80,ì—¬:15~80), 15ë…„ë‚©(ë‚¨:15~70,ì—¬:15~70)",
              "renew": "ë¹„ê°±ì‹ í˜•"
            }
            """);
        
        // ... ì˜ˆì‹œ 2-5
    }
    
    public String buildFewShotPrompt(String pdfText, String insuCd, String productName) {
        StringBuilder prompt = new StringBuilder();
        
        prompt.append("ë‹¹ì‹ ì€ ë³´í—˜ ë¬¸ì„œ íŒŒì‹± ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\n");
        prompt.append("ë‹¤ìŒ ì˜ˆì‹œë“¤ì„ ì°¸ê³ í•˜ì—¬ ì •í™•íˆ ì¶”ì¶œí•˜ì„¸ìš”.\n\n");
        
        // ëª¨ë“  ì˜ˆì‹œ ì¶”ê°€
        for (String example : examples) {
            prompt.append(example).append("\n\n");
        }
        
        // ì‹¤ì œ íŒŒì‹± ìš”ì²­
        prompt.append("[ì´ì œ ë‹¤ìŒ ìƒí’ˆì„ íŒŒì‹±í•˜ì„¸ìš”]\n");
        prompt.append("ì…ë ¥:\n");
        prompt.append("ìƒí’ˆì½”ë“œ: ").append(insuCd).append("\n");
        prompt.append("ìƒí’ˆëª…: ").append(productName).append("\n");
        prompt.append("ì‚¬ì—…ë°©ë²• ë‚´ìš©:\n").append(pdfText).append("\n\n");
        prompt.append("ì¶œë ¥ (JSON í˜•ì‹):\n");
        
        return prompt.toString();
    }
}
```

#### 2.2 ë‹¤ì¸µ ê²€ì¦ í”„ë¡œì„¸ìŠ¤

```java
class MultiLayerValidationService {
    public ValidationResult validate(Map<String, String> terms, String pdfText, String insuCd) {
        int totalScore = 0;
        List<String> failures = new ArrayList<>();
        
        // Layer 1: êµ¬ë¬¸ ê²€ì¦ (25ì )
        // - ë³´í—˜ê¸°ê°„ í˜•ì‹: "ì¢…ì‹ |\\d+ì„¸ë§Œê¸°|\\d+ë…„ë§Œê¸°"
        // - ë‚©ì…ê¸°ê°„ í˜•ì‹: "ì „ê¸°ë‚©|\\d+ë…„ë‚©"
        // - ê°€ì…ë‚˜ì´ í˜•ì‹: "\\d+~\\d+"
        int syntaxScore = validateSyntax(terms, failures);
        totalScore += syntaxScore;
        log.info("Layer 1 (êµ¬ë¬¸): {}/25", syntaxScore);
        
        // Layer 2: ì˜ë¯¸ ê²€ì¦ (25ì )
        // - ë³´í—˜ê¸°ê°„ >= ë‚©ì…ê¸°ê°„ (ì¢…ì‹ ì€ ë¬´í•œëŒ€)
        // - ê°€ì…ë‚˜ì´ ë²”ìœ„ 0-120ì„¸
        int semanticScore = validateSemantics(terms, failures);
        totalScore += semanticScore;
        log.info("Layer 2 (ì˜ë¯¸): {}/25", semanticScore);
        
        // Layer 3: ë„ë©”ì¸ ê²€ì¦ (25ì )
        // - ë³´í—˜ì—…ê³„ ê·œì¹™ ì¤€ìˆ˜
        // - PDF í…ìŠ¤íŠ¸ì™€ ì¼ì¹˜ë„ 50% ì´ìƒ
        int domainScore = validateDomain(terms, pdfText, insuCd, failures);
        totalScore += domainScore;
        log.info("Layer 3 (ë„ë©”ì¸): {}/25", domainScore);
        
        // Layer 4: LLM êµì°¨ ê²€ì¦ (25ì )
        // - 3ê°œ ëª¨ë¸ ì¼ì¹˜ë„
        // - LLM í†µí•© íŒŒì‹±ì´ë©´ 25ì 
        int llmScore = validateLLMConsistency(terms, failures);
        totalScore += llmScore;
        log.info("Layer 4 (LLM): {}/25", llmScore);
        
        // ê²°ê³¼ íŒì •
        String status = totalScore >= 90 ? "PASS" : 
                       totalScore >= 70 ? "WARNING" : "FAIL";
        
        return new ValidationResult(totalScore, status, failures, 
                                   generateRecommendations(totalScore, failures));
    }
    
    private int validateSyntax(Map<String, String> terms, List<String> failures) {
        int score = 0;
        
        // ë³´í—˜ê¸°ê°„ í˜•ì‹
        String insuTerm = terms.get("insuTerm");
        if (insuTerm != null && insuTerm.matches(".*(ì¢…ì‹ |\\d+ì„¸ë§Œê¸°|\\d+ë…„ë§Œê¸°).*")) {
            score += 8;
        } else {
            failures.add("ë³´í—˜ê¸°ê°„ í˜•ì‹ ì˜¤ë¥˜: " + insuTerm);
        }
        
        // ë‚©ì…ê¸°ê°„ í˜•ì‹
        String payTerm = terms.get("payTerm");
        if (payTerm != null && payTerm.matches(".*(ì „ê¸°ë‚©|\\d+ë…„ë‚©).*")) {
            score += 8;
        } else {
            failures.add("ë‚©ì…ê¸°ê°„ í˜•ì‹ ì˜¤ë¥˜: " + payTerm);
        }
        
        // ê°€ì…ë‚˜ì´ í˜•ì‹
        String ageRange = terms.get("ageRange");
        if (ageRange != null && ageRange.matches(".*\\d+~\\d+.*")) {
            score += 9;
        } else {
            failures.add("ê°€ì…ë‚˜ì´ í˜•ì‹ ì˜¤ë¥˜: " + ageRange);
        }
        
        return score;
    }
}
```

---

### Phase 3: ì ì§„ì  í•™ìŠµ ì‹œìŠ¤í…œ

#### 3.1 ì‚¬ìš©ì ìˆ˜ì •ì‚¬í•­ í•™ìŠµ

```java
class IncrementalLearningService {
    private List<CorrectionLog> correctionLogs = new ArrayList<>();
    private Map<String, String> learnedPatterns = new ConcurrentHashMap<>();
    
    public void logCorrection(String insuCd, 
                             Map<String, String> original,
                             Map<String, String> corrected,
                             String pdfText) {
        
        // 1. ìˆ˜ì • ë¡œê·¸ ìƒì„±
        CorrectionLog log = CorrectionLog.builder()
            .insuCd(insuCd)
            .originalResult(original)
            .correctedResult(corrected)
            .pdfText(pdfText)
            .timestamp(LocalDateTime.now())
            .build();
        
        correctionLogs.add(log);
        
        // 2. ì¦‰ì‹œ íŒ¨í„´ í•™ìŠµ
        for (String key : corrected.keySet()) {
            String originalValue = original.get(key);
            String correctedValue = corrected.get(key);
            
            if (!originalValue.equals(correctedValue)) {
                // íŒ¨í„´ ì €ì¥: "ë³´í—˜ì½”ë“œ_í•„ë“œ" â†’ ì˜¬ë°”ë¥¸ ê°’
                String patternKey = insuCd + "_" + key;
                learnedPatterns.put(patternKey, correctedValue);
                
                log.info("íŒ¨í„´ í•™ìŠµ: {} â†’ {}", patternKey, correctedValue);
            }
        }
        
        // 3. 10ê±´ë§ˆë‹¤ ë°°ì¹˜ í•™ìŠµ
        if (correctionLogs.size() % 10 == 0) {
            performBatchLearning();
        }
    }
    
    private void performBatchLearning() {
        log.info("=== ë°°ì¹˜ í•™ìŠµ ì‹œì‘ ===");
        
        // 1. ìì£¼ ì‹¤íŒ¨í•˜ëŠ” ìƒí’ˆ íŒŒì•…
        Map<String, Long> failureCount = correctionLogs.stream()
            .collect(Collectors.groupingBy(
                CorrectionLog::getInsuCd,
                Collectors.counting()
            ));
        
        // 2. ìƒìœ„ 5ê°œ ì‹¤íŒ¨ ìƒí’ˆì— ëŒ€í•œ Few-Shot ì˜ˆì‹œ ìƒì„±
        failureCount.entrySet().stream()
            .sorted(Map.Entry.<String, Long>comparingByValue().reversed())
            .limit(5)
            .forEach(entry -> {
                generateFewShotExample(entry.getKey());
            });
        
        // 3. ê³µí†µ ì˜¤ë¥˜ íŒ¨í„´ ë¶„ì„
        analyzeCommonErrors();
    }
    
    private void generateFewShotExample(String insuCd) {
        // ìµœì‹  ìˆ˜ì •ì‚¬í•­ ê°€ì ¸ì˜¤ê¸°
        CorrectionLog latest = correctionLogs.stream()
            .filter(log -> log.getInsuCd().equals(insuCd))
            .max(Comparator.comparing(CorrectionLog::getTimestamp))
            .orElse(null);
        
        if (latest != null) {
            // Few-Shot ì˜ˆì‹œ ìƒì„±
            String example = buildExample(latest);
            
            // Few-Shot ì˜ˆì‹œ ì¶”ê°€
            fewShotExamples.addExample(example);
            
            log.info("Few-Shot ì˜ˆì‹œ ì¶”ê°€: {}", insuCd);
        }
    }
    
    public Map<String, String> applyLearnedPatterns(String insuCd, 
                                                    Map<String, String> rawResult) {
        Map<String, String> enhanced = new HashMap<>(rawResult);
        
        // í•™ìŠµëœ íŒ¨í„´ ì ìš©
        for (String key : rawResult.keySet()) {
            String patternKey = insuCd + "_" + key;
            if (learnedPatterns.containsKey(patternKey)) {
                String learnedValue = learnedPatterns.get(patternKey);
                enhanced.put(key, learnedValue);
                log.debug("í•™ìŠµëœ íŒ¨í„´ ì ìš©: {} â†’ {}", patternKey, learnedValue);
            }
        }
        
        return enhanced;
    }
}
```

---

## ğŸ”Œ API í˜¸ì¶œ íë¦„

### 1. ìƒí’ˆ ì •ë³´ ì¡°íšŒ

```
GET /api/product/info/{insuCd}

Request:
  URL: /api/product/info/21686
  
Response:
  {
    "insuCd": "21686",
    "name": "(ë¬´)í¥êµ­ìƒëª… ë‹¤(å¤š)ì‚¬ë‘ì•”ë³´í—˜",
    "type": "ì£¼ê³„ì•½",
    "terms": [
      {
        "insuTerm": "ì¢…ì‹ ",
        "payTerm": "10ë…„ë‚©",
        "ageRange": "10ë…„ë‚©(ë‚¨:15~80,ì—¬:15~80)",
        "renew": "ë¹„ê°±ì‹ í˜•",
        "specialNotes": "Few-Shot LLM (ì‹ ë¢°ë„: 92%, ìƒíƒœ: PASS)"
      },
      {
        "insuTerm": "ì¢…ì‹ ",
        "payTerm": "15ë…„ë‚©",
        "ageRange": "15ë…„ë‚©(ë‚¨:15~70,ì—¬:15~70)",
        "renew": "ë¹„ê°±ì‹ í˜•",
        "specialNotes": "Few-Shot LLM (ì‹ ë¢°ë„: 92%, ìƒíƒœ: PASS)"
      },
      // ... 4ê°œ ì¡°í•©
    ],
    "calcAvailable": true,
    "message": null
  }
```

### 2. ë³´í—˜ë£Œ ê³„ì‚°

```
GET /api/premium/calculate-by-terms/{insuCd}?age={age}&insuTerm={insuTerm}&payTerm={payTerm}&baseAmount={baseAmount}

Request:
  URL: /api/premium/calculate-by-terms/21686?age=30&insuTerm=ì¢…ì‹ &payTerm=10ë…„ë‚©&baseAmount=1000000
  
Response:
  {
    "insuCd": "21686",
    "age": 30,
    "insuTerm": "ì¢…ì‹ ",
    "payTerm": "10ë…„ë‚©",
    "baseAmount": 1000000,
    "premiumMale": 45000,
    "premiumFemale": 42000,
    "message": "ê³„ì‚° ì„±ê³µ"
  }
```

### 3. ì‚¬ìš©ì ìˆ˜ì •ì‚¬í•­ ì œì¶œ

```
POST /api/learning/correction

Request:
  {
    "insuCd": "21686",
    "originalResult": {
      "insuTerm": "ì¢…ì‹ ",
      "payTerm": "10ë…„ë‚©",        // ì˜¤ë¥˜
      "ageRange": "15~80",         // ì˜¤ë¥˜
      "renew": "ë¹„ê°±ì‹ í˜•"
    },
    "correctedResult": {
      "insuTerm": "ì¢…ì‹ ",
      "payTerm": "10ë…„ë‚©, 15ë…„ë‚©, 20ë…„ë‚©, 30ë…„ë‚©",  // ìˆ˜ì •
      "ageRange": "10ë…„ë‚©(ë‚¨:15~80,ì—¬:15~80)",      // ìˆ˜ì •
      "renew": "ë¹„ê°±ì‹ í˜•"
    },
    "pdfText": "ë³´í—˜ê¸°ê°„: ì¢…ì‹ , ë‚©ì…ê¸°ê°„: 10,15,20,30ë…„ë‚©"
  }

Response:
  {
    "success": true,
    "message": "ìˆ˜ì •ì‚¬í•­ì´ í•™ìŠµë˜ì—ˆìŠµë‹ˆë‹¤",
    "statistics": {
      "totalCorrections": 1,
      "learnedPatterns": 2,
      "fewShotExamples": 5,
      "currentAccuracy": 75.0,
      "improvement": 0.0
    }
  }
```

---

## âš ï¸ ì˜ˆì™¸ ì²˜ë¦¬

### 1. PDF íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°

```java
File pdf = findPdfForCode(pdfDir, insuCd);
if (pdf == null) {
    return ProductInfoResponse.builder()
        .insuCd(insuCd)
        .calcAvailable(false)
        .message("ì§ˆë¬¸ì— í•´ë‹¹í•˜ëŠ” PDF ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤")
        .build();
}
```

### 2. ëª¨ë“  íŒŒì‹± ì „ëµ ì‹¤íŒ¨

```java
if (results.isEmpty()) {
    log.warn("ëª¨ë“  íŒŒì‹± ì „ëµ ì‹¤íŒ¨");
    return getDefaultResult();
}

private Map<String, String> getDefaultResult() {
    Map<String, String> result = new HashMap<>();
    result.put("insuTerm", "â€”");
    result.put("payTerm", "â€”");
    result.put("ageRange", "â€”");
    result.put("renew", "â€”");
    result.put("specialNotes", "ëª¨ë“  íŒŒì‹± ì „ëµ ì‹¤íŒ¨");
    return result;
}
```

### 3. ë‹¤ì¸µ ê²€ì¦ ì‹¤íŒ¨

```java
ValidationResult validation = validationService.validate(result, pdfText, insuCd);

if (!validation.isPassed()) {
    log.warn("ê²€ì¦ ì‹¤íŒ¨ ({}%): {}", 
            validation.getConfidence(), 
            validation.getFailureReasons());
    log.info("ê¶Œì¥ì‚¬í•­: {}", validation.getRecommendations());
    
    // ê²°ê³¼ì— ê²½ê³  í‘œì‹œ
    result.put("specialNotes", 
        String.format("ê²€ì¦ ì‹¤íŒ¨ (ì‹ ë¢°ë„: %d%%) - ìˆ˜ë™ í™•ì¸ í•„ìš”", 
                     validation.getConfidence()));
}
```

### 4. LLM íƒ€ì„ì•„ì›ƒ

```java
try {
    CompletableFuture.allOf(llamaFuture, mistralFuture, codeLlamaFuture)
        .get(30, TimeUnit.SECONDS);  // 30ì´ˆ íƒ€ì„ì•„ì›ƒ
} catch (TimeoutException e) {
    log.error("LLM íŒŒì‹± íƒ€ì„ì•„ì›ƒ: {}", e.getMessage());
    return getEmptyResult();
}
```

---

## ğŸ¯ ì„±ëŠ¥ ìµœì í™”

### 1. ìºì‹œ ì‹œìŠ¤í…œ

```java
// íŒŒì‹± ê²°ê³¼ ìºì‹±
Map<String, Map<String, String>> resultCache = new ConcurrentHashMap<>();

String cacheKey = pdfFile.getName() + "_" + insuCd;
if (resultCache.containsKey(cacheKey)) {
    log.info("ìºì‹œ íˆíŠ¸! (0.5ì´ˆ)");
    return resultCache.get(cacheKey);
}

// íŒŒì‹± í›„ ìºì‹œì— ì €ì¥
resultCache.put(cacheKey, result);
```

### 2. ë³‘ë ¬ ì²˜ë¦¬

```java
// 3ê°œ LLM ë³‘ë ¬ ì‹¤í–‰
CompletableFuture<Map<String, String>> llamaFuture = 
    CompletableFuture.supplyAsync(() -> 
        ollamaService.parseWithLlama(prompt, insuCd), executor);

CompletableFuture<Map<String, String>> mistralFuture = 
    CompletableFuture.supplyAsync(() -> 
        ollamaService.parseWithMistral(prompt, insuCd), executor);

CompletableFuture<Map<String, String>> codeLlamaFuture = 
    CompletableFuture.supplyAsync(() -> 
        ollamaService.parseWithCodeLlama(prompt, insuCd), executor);

// ëª¨ë“  LLM ì™„ë£Œ ëŒ€ê¸° (ë³‘ë ¬ ì‹¤í–‰ìœ¼ë¡œ ì‹œê°„ ì ˆì•½)
CompletableFuture.allOf(llamaFuture, mistralFuture, codeLlamaFuture)
    .get(30, TimeUnit.SECONDS);
```

### 3. ì¡°ê¸° ì¢…ë£Œ

```java
// ì‹ ë¢°ë„ 85% ì´ìƒì´ë©´ ì¶”ê°€ ì „ëµ ìƒëµ
if (confidence >= 85) {
    log.info("ë†’ì€ ì‹ ë¢°ë„ ë‹¬ì„±, ì¶”ê°€ ì „ëµ ìƒëµ");
    return result;
}
```

---

## ğŸ“ ìš”ì•½

### í•µì‹¬ í”„ë¡œì„¸ìŠ¤
1. **PDF ê²€ìƒ‰ ë° ë¡œë“œ** â†’ 2. **í•˜ì´ë¸Œë¦¬ë“œ íŒŒì‹±** (3ë‹¨ê³„ í´ë°±) â†’ 3. **ë‹¤ì¸µ ê²€ì¦** (4ë‹¨ê³„) â†’ 4. **ì¡°í•© ìƒì„±** â†’ 5. **ë³´í—˜ë£Œ ê³„ì‚°** â†’ 6. **ì‚¬ìš©ì í”¼ë“œë°±** â†’ 7. **ì ì§„ì  í•™ìŠµ**

### ì£¼ìš” íŠ¹ì§•
- âœ… **ë‹¤ì¤‘ í´ë°±**: Python OCR â†’ ì‚¬ì—…ë°©ë²•ì„œ â†’ Few-Shot LLM
- âœ… **ì‹ ë¢°ë„ ê¸°ë°˜**: ê° ë‹¨ê³„ë§ˆë‹¤ 0-100ì  í‰ê°€
- âœ… **ìºì‹œ ìµœì í™”**: ë°˜ë³µ ìš”ì²­ 0.5ì´ˆ ì´ë‚´
- âœ… **ë³‘ë ¬ ì²˜ë¦¬**: 3ê°œ LLM ë™ì‹œ ì‹¤í–‰
- âœ… **ìê¸° ê°œì„ **: ì‚¬ìš©ì í”¼ë“œë°±ìœ¼ë¡œ ì •í™•ë„ í–¥ìƒ

### ëª©í‘œ ë‹¬ì„±
- **ì •í™•ë„**: 95%+ (Phase 1: 91% â†’ Phase 2: 93% â†’ Phase 3: 95%+)
- **ì²˜ë¦¬ ì‹œê°„**: 2-4ì´ˆ (ìºì‹œ: 0.5ì´ˆ)
- **ì˜¤í”„ë¼ì¸**: ì™„ì „ ì§€ì›
- **ë¹„ìš©**: $0

---

**ì‘ì„±ì¼**: 2025-10-11  
**ë¬¸ì„œ ë²„ì „**: 1.0


